from os import fpathconf
from scripts.pwn import *

def init_instance(organizer, player):
    factory = TokenDistributorFactory.deploy({"from": organizer.address})

    tx = factory.createInstance(player.address, {"from": organizer.address})
    print("============")
    print("tx: %s" % tx.return_value)
    
    return (factory, TokenDistributor.at(tx.return_value))

def deploy(player, organizer):
    (factory, instance) = init_instance(organizer, player)

    print("player  : %s" % player)
    print("factory : %s" % factory)
    print("instance: %s" % instance)

    return (player, factory, instance)

def main():
    player = a[0]
    organizer = a[0]

    (player, factory, instance) = deploy(player, organizer)

    accounts.default = player
    assert factory.validateInstance(instance.address, player.address) == False

